<!DOCTYPE html>
<html>

<head>
  <link rel="stylesheet" href="popup.css">
</head>

<body>
  <div class="tabs">
    <button class="tab-btn active" data-tab="tab-tasks">Tasks</button>
    <button class="tab-btn" data-tab="tab-settings">Settings</button>
  </div>

  <div id="tab-tasks" class="tab-content active">
    <div class="done-tasks-section">
      <div style="display: flex; justify-content: space-between; align-items: center;">
        <h3>Done Tasks</h3>
        <div class="action-buttons">
          <button id="import-btn" class="icon-btn" title="Import CSV">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
              <polyline points="17 8 12 3 7 8"></polyline>
              <line x1="12" y1="3" x2="12" y2="15"></line>
            </svg>
          </button>
          <button id="export-btn" class="icon-btn" title="Export CSV">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
              <polyline points="7 10 12 15 17 10"></polyline>
              <line x1="12" y1="15" x2="12" y2="3"></line>
            </svg>
          </button>
          <button id="download-sample-btn" class="icon-btn" title="Download Sample CSV">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
              <polyline points="14 2 14 8 20 8"></polyline>
              <line x1="12" y1="18" x2="12" y2="12"></line>
              <line x1="9" y1="15" x2="15" y2="15"></line>
            </svg>
          </button>
          <input type="file" id="import-file" accept=".csv" style="display: none;">
        </div>
      </div>
      <div class="done-list-container-container">
        <div class="done-list-container">
          <table id="done-todo-table">
            <thead>
              <tr>
                <th>Task</th>
                <th>Finished At</th>
                <th style="width: 40px;">Action</th>
              </tr>
            </thead>
            <tbody id="done-todo-list">
              <!-- Done items will be rendered here -->
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>

  <div id="tab-settings" class="tab-content">
    <h3>Account (Cloud Sync)</h3>
    <div class="auth-section" style="margin-bottom: 20px; padding: 10px; background: rgba(0,0,0,0.05); border-radius: 6px;">
      <div id="logged-out-view">
        <button id="auth-google-btn" style="width: 100%; padding: 8px; cursor: pointer; background: white; color: #444; border: 1px solid #ccc; border-radius: 4px; display: flex; align-items: center; justify-content: center; gap: 8px; font-weight: 500;">
          <svg style="width: 18px; height: 18px;" viewBox="0 0 24 24">
            <path fill="#ea4335" d="M5.266 9.765A7.077 7.077 0 0112 4.909c1.69 0 3.218.6 4.418 1.582L19.91 3C17.782 1.145 15.055 0 12 0 7.27 0 3.197 2.698 1.24 6.65l4.026 3.115z"/>
            <path fill="#34a853" d="M16.04 18.013c-1.09.703-2.474 1.078-4.04 1.078a7.077 7.077 0 01-6.723-4.806l-4.04 3.127C3.197 21.302 7.27 24 12 24c3.24 0 5.966-1.08 7.962-2.916l-3.922-3.071z"/>
            <path fill="#4a90e2" d="M19.962 21.084C22.045 19.14 23.415 16.14 23.415 12.443c0-.85-.084-1.66-.232-2.443H12v4.619h6.634c-.308 1.62-1.282 2.99-2.67 3.842l3.998 2.623z"/>
            <path fill="#fbbc05" d="M5.277 14.268A7.12 7.12 0 014.909 12c0-.782.125-1.533.357-2.235L1.24 6.65A11.934 11.934 0 000 12c0 1.92.445 3.73 1.237 5.335l4.04-3.067z"/>
          </svg>
          Sign in with Google
        </button>
        <div id="auth-error" style="color: #ef4444; font-size: 12px; margin-top: 8px; display: none;"></div>
      </div>
      <div id="logged-in-view" style="display: none;">
        <div style="margin-bottom: 8px; font-size: 13px;">Logged in as:<br><strong id="auth-user-email"></strong></div>
        <button id="auth-logout-btn" style="width: 100%; padding: 6px; cursor: pointer; background: #ef4444; color: white; border: none; border-radius: 4px;">Logout</button>
      </div>
    </div>

    <h3>Premium Status</h3>
    <div class="premium-section" style="margin-bottom: 20px; padding: 10px; background: rgba(0,0,0,0.05); border-radius: 6px;">
      <div id="free-tier-view" style="display: none;">
        <p style="font-size: 13px; margin-top: 0; margin-bottom: 8px;">You are currently on the Free tier. Upgrade to Pro to enable End-to-End Encrypted Cloud Sync!</p>
        <button id="upgrade-pro-btn" style="width: 100%; padding: 8px; cursor: pointer; background: #8b5cf6; color: white; border: none; border-radius: 4px; font-weight: bold;">Upgrade to Pro via Stripe</button>
      </div>
      <div id="pro-tier-view" style="display: none;">
        <p style="font-size: 13px; margin-top: 0; margin-bottom: 0; color: #10b981; font-weight: bold;">You are a Pro user! Encrypted Sync is Active.</p>
      </div>
    </div>

    <h3>Theme</h3>
    <div class="theme-buttons-container">
      <button class="theme-btn" data-theme="system" title="System Theme">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <rect x="2" y="3" width="20" height="14" rx="2" ry="2"></rect>
          <line x1="8" y1="21" x2="16" y2="21"></line>
          <line x1="12" y1="17" x2="12" y2="21"></line>
        </svg>
      </button>
      <button class="theme-btn" data-theme="light" title="Light Theme">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <circle cx="12" cy="12" r="5"></circle>
          <line x1="12" y1="1" x2="12" y2="3"></line>
          <line x1="12" y1="21" x2="12" y2="23"></line>
          <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
          <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
          <line x1="1" y1="12" x2="3" y2="12"></line>
          <line x1="21" y1="12" x2="23" y2="12"></line>
          <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
          <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
        </svg>
      </button>
      <button class="theme-btn" data-theme="dark" title="Dark Theme">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
        </svg>
      </button>
    </div>
  </div>
  <script src="popup.js"></script>
</body>

</html>